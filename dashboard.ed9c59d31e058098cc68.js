(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{2051:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(25),s=n(21),i=n(248),c=n(125),u=n.n(c),l=(n(11),n(1852),n(1764),n(3)),p=n.n(l),f=n(36),h=n(46),d=n(137),m=n(5),y=n.n(m),g=n(82),v=n(33),b=n(15),w=n(1),E=n.n(w),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=function(e){function t(){_(this,t);var e=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.statsInterval=null,e.state={imgError:!1},e}return S(t,a.a.Component),k(t,[{key:"_checkStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{close:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{close:{}};return e.volumeBase!==t.volumeBase||!b.a.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)||!b.a.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)}},{key:"shouldComponentUpdate",value:function(e,t){return this._checkStats(e.marketStats,this.props.marketStats)||e.base.get("id")!==this.props.base.get("id")||e.quote.get("id")!==this.props.quote.get("id")||t.imgError!==this.state.imgError}},{key:"componentWillMount",value:function(){g.a.getMarketStats.defer(this.props.quote,this.props.base),this.statsChecked=new Date,this.statsInterval=setInterval(g.a.getMarketStats.bind(this,this.props.quote,this.props.base),35e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.statsInterval)}},{key:"goToMarket",value:function(e){e.preventDefault(),this.context.router.history.push("/market/"+this.props.base.get("symbol")+"_"+this.props.quote.get("symbol"))}},{key:"_onError",value:function(e){this.state.imgError||(this.refs[e.toLowerCase()].src="asset-symbols/bts.png",this.setState({imgError:!0}))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.isLowVolume,r=e.base,o=e.quote,s=e.marketStats;if(n||t)return null;var i=function(e){return e.get("symbol")}(r),c=s?parseFloat(s.change)>0?"change-up":parseFloat(s.change)<0?"change-down":"":"";return a.a.createElement("div",{className:y()("grid-block no-overflow fm-container",this.props.className),onClick:this.goToMarket.bind(this)},a.a.createElement("div",{className:"grid-block vertical shrink"},a.a.createElement("div",{className:"v-align"},a.a.createElement("img",{className:"align-center",ref:i.toLowerCase(),onError:this._onError.bind(this,i),style:{maxWidth:70},src:"asset-symbols/"+i.toLowerCase()+".png"}))),a.a.createElement("div",{className:"grid-block vertical no-overflow"},a.a.createElement("div",{className:"fm-name"},a.a.createElement(d.a,{dataPlace:"top",name:r.get("symbol")})," ",":"," ",a.a.createElement(d.a,{dataPlace:"top",name:o.get("symbol")})),a.a.createElement("div",{className:"fm-volume"},a.a.createElement(p.a,{content:"exchange.price"}),":"," ",a.a.createElement("div",{className:"float-right"},s&&s.price?b.a.price_text(s.price.toReal(),r,o):null)),a.a.createElement("div",{className:"fm-volume"},a.a.createElement(p.a,{content:"exchange.volume"}),":"," ",a.a.createElement("div",{className:"float-right"},s?b.a.format_volume(s.volumeBase,o.get("precision")):null)),a.a.createElement("div",{className:"fm-change"},a.a.createElement(p.a,{content:"exchange.change"}),":"," ",a.a.createElement("div",{className:y()("float-right",c)},s?s.change:null,"%"))))}}]),t}();A.contextTypes={router:E.a.object.isRequired},A.propTypes={quote:f.a.ChainAsset.isRequired,base:f.a.ChainAsset.isRequired,invert:E.a.bool},A.defaultProps={invert:!0},A=Object(h.a)(A);var j=function(e){function t(){return _(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,a.a.Component),k(t,[{key:"render",value:function(){return a.a.createElement(A,this.props)}}]),t}(),T=Object(v.connect)(j,{listenTo:function(){return[i.a]},getProps:function(e){return{marketStats:i.a.getState().allMarketStats.get(e.marketId)}}}),P=n(13),N=n(39),q=n(537),C=n(22),x=n(35),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var M=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r={"4018d784":Object(x.h)(),"39f5e2ed":[["TEST","PEG.FAKEUSD"],["TEST","BTWTY"]]},a=P.Apis.instance().chain_id;return a&&(a=a.substr(0,8)),n.state={width:null,showIgnored:!1,featuredMarkets:r[a]||r["4018d784"],newAssets:[],currentEntry:e.currentEntry},n._setDimensions=n._setDimensions.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),I(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}},{key:"shouldComponentUpdate",value:function(e,t){return!b.a.are_equal_shallow(t.featuredMarkets,this.state.featuredMarkets)||!b.a.are_equal_shallow(t.newAssets,this.state.newAssets)||e.linkedAccounts!==this.props.linkedAccounts||e.ignoredAccounts!==this.props.ignoredAccounts||e.passwordAccount!==this.props.passwordAccount||t.width!==this.state.width||e.accountsReady!==this.props.accountsReady||t.showIgnored!==this.state.showIgnored||t.currentEntry!==this.state.currentEntry}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions)}},{key:"_setDimensions",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:"_onToggleIgnored",value:function(){this.setState({showIgnored:!this.state.showIgnored})}},{key:"_onSwitchType",value:function(e){this.setState({currentEntry:e}),C.a.changeViewSetting({dashboardEntry:e})}},{key:"render",value:function(){var e=this.props,t=e.linkedAccounts,n=e.myHiddenAccounts,r=e.accountsReady,o=e.passwordAccount,s=this.state,i=(s.width,s.showIgnored,s.featuredMarkets),c=s.newAssets;s.currentEntry;o&&!t.has(o)&&(t=t.add(o));var u=t.toArray().sort();o&&-1===u.indexOf(o)&&u.push(o);n.toArray().sort();var l=t.size+n.size+(o?1:0);if(!r)return a.a.createElement(N.a,null);var f=0,h=i.map(function(e){var t="";return++f>15?t+=" show-for-"+(l?"large":"xlarge"):f>12&&(t+=" show-for-"+(l?"medium":"large")),a.a.createElement(T,{key:e[0]+"_"+e[1],marketId:e[1]+"_"+e[0],new:-1!==c.indexOf(e[1]),className:t,quote:e[0],base:e[1],invert:e[2],hide:f>29})}).filter(function(e){return!!e});if(!l)return a.a.createElement(q.a,null);return a.a.createElement("div",{ref:"wrapper",className:"grid-block vertical"},a.a.createElement("div",{ref:"container",className:"grid-container",style:{padding:"2rem 8px"}},this.props.onlyAccounts?null:a.a.createElement("div",{className:"block-content-header",style:{marginBottom:15,paddingTop:0}},a.a.createElement(p.a,{content:"exchange.featured"})),this.props.onlyAccounts?null:a.a.createElement("div",{className:"grid-block small-up-1 medium-up-3 large-up-4 no-overflow fm-outer-container"},h)))}}]),t}(),R=function(e){return a.a.createElement(M,e)},D=R=Object(v.connect)(R,{listenTo:function(){return[s.a]},getProps:function(){return{viewSettings:s.a.getState().viewSettings}}}),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var W=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),L(t,[{key:"render",value:function(){return a.a.createElement(u.a,{stores:[o.a,s.a,i.a],inject:{linkedAccounts:function(){return o.a.getState().linkedAccounts},myHiddenAccounts:function(){return o.a.getState().myHiddenAccounts},accountsReady:function(){return o.a.getState().accountsLoaded&&o.a.getState().refsLoaded},passwordAccount:function(){return o.a.getState().passwordAccount},currentEntry:s.a.getState().viewSettings.get("dashboardEntry","accounts")}},a.a.createElement(D,this.props))}}]),t}();t.default=W}}]);
//# sourceMappingURL=dashboard.js.map