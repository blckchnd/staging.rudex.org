(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{2014:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(24),s=n(21),i=n(237),c=n(117),l=n.n(c),u=(n(11),n(1817),n(1727),n(3)),p=n.n(u),f=n(35),h=n(41),m=n(127),d=n(4),g=n.n(d),y=n(77),v=n(31),b=n(15),w=n(1),E=n.n(w),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=function(e){function t(){_(this,t);var e=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.statsInterval=null,e.state={imgError:!1},e}return O(t,o.a.Component),k(t,[{key:"_checkStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{close:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{close:{}};return e.volumeBase!==t.volumeBase||!b.a.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)||!b.a.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)}},{key:"shouldComponentUpdate",value:function(e,t){return this._checkStats(e.marketStats,this.props.marketStats)||e.base.get("id")!==this.props.base.get("id")||e.quote.get("id")!==this.props.quote.get("id")||t.imgError!==this.state.imgError}},{key:"componentWillMount",value:function(){y.a.getMarketStats.defer(this.props.quote,this.props.base),this.statsChecked=new Date,this.statsInterval=setInterval(y.a.getMarketStats.bind(this,this.props.quote,this.props.base),35e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.statsInterval)}},{key:"goToMarket",value:function(e){e.preventDefault(),this.context.router.history.push("/market/"+this.props.base.get("symbol")+"_"+this.props.quote.get("symbol"))}},{key:"_onError",value:function(e){this.state.imgError||(this.refs[e.toLowerCase()].src="asset-symbols/bts.png",this.setState({imgError:!0}))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.isLowVolume,r=e.base,a=e.quote,s=e.marketStats;if(n||t)return null;var i=function(e){return e.get("symbol")}(r),c=s?parseFloat(s.change)>0?"change-up":parseFloat(s.change)<0?"change-down":"":"";return o.a.createElement("div",{className:g()("grid-block no-overflow fm-container",this.props.className),onClick:this.goToMarket.bind(this)},o.a.createElement("div",{className:"grid-block vertical shrink"},o.a.createElement("div",{className:"v-align"},o.a.createElement("img",{className:"align-center",ref:i.toLowerCase(),onError:this._onError.bind(this,i),style:{maxWidth:70},src:"asset-symbols/"+i.toLowerCase()+".png"}))),o.a.createElement("div",{className:"grid-block vertical no-overflow"},o.a.createElement("div",{className:"fm-name"},o.a.createElement(m.a,{dataPlace:"top",name:r.get("symbol")})," ",":"," ",o.a.createElement(m.a,{dataPlace:"top",name:a.get("symbol")})),o.a.createElement("div",{className:"fm-volume"},o.a.createElement(p.a,{content:"exchange.price"}),":"," ",o.a.createElement("div",{className:"float-right"},s&&s.price?b.a.price_text(s.price.toReal(),r,a):null)),o.a.createElement("div",{className:"fm-volume"},o.a.createElement(p.a,{content:"exchange.volume"}),":"," ",o.a.createElement("div",{className:"float-right"},s?b.a.format_volume(s.volumeBase,a.get("precision")):null)),o.a.createElement("div",{className:"fm-change"},o.a.createElement(p.a,{content:"exchange.change"}),":"," ",o.a.createElement("div",{className:g()("float-right",c)},s?s.change:null,"%"))))}}]),t}();A.contextTypes={router:E.a.object.isRequired},A.propTypes={quote:f.a.ChainAsset.isRequired,base:f.a.ChainAsset.isRequired,invert:E.a.bool},A.defaultProps={invert:!0},A=Object(h.a)(A);var j=function(e){function t(){return _(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,o.a.Component),k(t,[{key:"render",value:function(){return o.a.createElement(A,this.props)}}]),t}(),T=Object(v.connect)(j,{listenTo:function(){return[i.a]},getProps:function(e){return{marketStats:i.a.getState().allMarketStats.get(e.marketId)}}}),P=n(12),q=n(38),N=n(520),M=n(20),C=n(34),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var I=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r={"4018d784":Object(C.h)(),"39f5e2ed":[["TEST","PEG.FAKEUSD"],["TEST","BTWTY"]]},o=P.a.instance().chain_id;return o&&(o=o.substr(0,8)),n.state={width:null,showIgnored:!1,featuredMarkets:r[o]||r["4018d784"],newAssets:[],currentEntry:e.currentEntry},n._setDimensions=n._setDimensions.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.Component),x(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}},{key:"shouldComponentUpdate",value:function(e,t){return!b.a.are_equal_shallow(t.featuredMarkets,this.state.featuredMarkets)||!b.a.are_equal_shallow(e.lowVolumeMarkets,this.props.lowVolumeMarkets)||!b.a.are_equal_shallow(t.newAssets,this.state.newAssets)||e.linkedAccounts!==this.props.linkedAccounts||e.ignoredAccounts!==this.props.ignoredAccounts||e.passwordAccount!==this.props.passwordAccount||t.width!==this.state.width||e.accountsReady!==this.props.accountsReady||t.showIgnored!==this.state.showIgnored||t.currentEntry!==this.state.currentEntry}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions)}},{key:"_setDimensions",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:"_onToggleIgnored",value:function(){this.setState({showIgnored:!this.state.showIgnored})}},{key:"_onSwitchType",value:function(e){this.setState({currentEntry:e}),M.a.changeViewSetting({dashboardEntry:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.linkedAccounts,r=t.myHiddenAccounts,a=t.accountsReady,s=t.passwordAccount,i=this.state,c=(i.width,i.showIgnored,i.featuredMarkets),l=i.newAssets;i.currentEntry;s&&!n.has(s)&&(n=n.add(s));var u=n.toArray().sort();s&&-1===u.indexOf(s)&&u.push(s);r.toArray().sort();var f=n.size+r.size+(s?1:0);if(!a)return o.a.createElement(q.a,null);var h=0,m=c.map(function(t){e.props.lowVolumeMarkets.get(t[1]+"_"+t[0])||e.props.lowVolumeMarkets.get(t[0]+"_"+t[1]);var n="";return++h>15?n+=" show-for-"+(f?"large":"xlarge"):h>12&&(n+=" show-for-"+(f?"medium":"large")),o.a.createElement(T,{key:t[0]+"_"+t[1],marketId:t[1]+"_"+t[0],new:-1!==l.indexOf(t[1]),className:n,quote:t[0],base:t[1],invert:t[2],isLowVolume:!1,hide:h>29})}).filter(function(e){return!!e});if(!f)return o.a.createElement(N.a,null);return o.a.createElement("div",{ref:"wrapper",className:"grid-block vertical"},o.a.createElement("div",{ref:"container",className:"grid-container",style:{padding:"2rem 8px"}},this.props.onlyAccounts?null:o.a.createElement("div",{className:"block-content-header",style:{marginBottom:15,paddingTop:0}},o.a.createElement(p.a,{content:"exchange.featured"})),this.props.onlyAccounts?null:o.a.createElement("div",{className:"grid-block small-up-1 medium-up-3 large-up-4 no-overflow fm-outer-container"},m)))}}]),t}(),R=function(e){return o.a.createElement(I,e)},D=R=Object(v.connect)(R,{listenTo:function(){return[s.a]},getProps:function(){return{viewSettings:s.a.getState().viewSettings}}}),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.Component),L(t,[{key:"render",value:function(){return o.a.createElement(l.a,{stores:[a.a,s.a,i.a],inject:{linkedAccounts:function(){return a.a.getState().linkedAccounts},myHiddenAccounts:function(){return a.a.getState().myHiddenAccounts},accountsReady:function(){return a.a.getState().accountsLoaded&&a.a.getState().refsLoaded},passwordAccount:function(){return a.a.getState().passwordAccount},lowVolumeMarkets:function(){return i.a.getState().lowVolumeMarkets},currentEntry:s.a.getState().viewSettings.get("dashboardEntry","accounts")}},o.a.createElement(D,this.props))}}]),t}();t.default=V}}]);