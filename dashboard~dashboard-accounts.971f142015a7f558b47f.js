(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1720:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1746),i=a.n(o),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),s(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?r.a.createElement(i.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):r.a.createElement(this.props.component)}}]),t}();l.defaultProps={component:"span",enterTimeout:2e3},t.a=l},1727:function(e,t,a){"use strict";a.d(t,"a",function(){return L}),a.d(t,"b",function(){return H});var n=a(0),r=a.n(n),o=a(3),i=a.n(o),s=a(318),l=a(502),c=a(35),u=a(41),h=a(15),p=a(9),m=a(1720),d=a(1722),f=a.n(d),g=a(16),b=a.n(g),v=a(19),y=a(4),_=a.n(y),E=a(1),w=a.n(E),k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=p.c.operations,O={textAlign:"left"};function N(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function j(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}var L=function(e){function t(e){A(this,t);var a=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={limit:e.limit||20,csvExport:!1,headerHeight:85,filter:"all"},a}return C(t,r.a.Component),k(t,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;f.a.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!h.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!h.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!h.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var a=0;a<e.accountsList.length;++a){var n=e.accountsList[a],r=this.props.accountsList[a];if(n&&r&&n.get("history")!==r.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container").childNodes,t="",a=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var l=o.value.childNodes;""!==t&&(t+="\n"),t+=[j(l[0]),j(l[1]),j(l[2]),j(l[3])].join(",")}}catch(e){n=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw r}}var c=new Blob([t],{type:"text/csv;charset=utf-8"}),u=new Date;Object(s.saveAs)(c,"btshist-"+u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2)+"-"+("0"+u.getHours()).slice(-2)+("0"+u.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var h=this.refs.transactions;f.a.update(h),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,a){var n=[],r=new Set,o=!0,i=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(u){var h=u.get("history");h&&(n=n.concat(h.toJS().filter(function(e){return!r.has(e.id)&&r.add(e.id)})))}}}catch(e){i=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw s}}return t&&(n=n.filter(function(e){return e.op[0]===S[t]})),a&&(n=n.filter(function(e){return a.fields.reduce(function(t,n){switch(n){case"asset_id":return t&&e.op[1].amount[n]===a.values[n];default:return t&&e.op[1][n]===a.values[n]}},!0)})),n}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.accountsList,a=e.compactView,n=e.filter,o=e.customFilter,s=e.style,c=e.maxHeight,u=this.state,h=u.limit,p=u.headerHeight,d=1===t.length&&t[0]?t[0].get("id"):null,f=this._getHistory(t,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:n,o).sort(N),g=f.length;s=s||{width:"100%",height:"100%"};var y=null;y=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"].map(function(e){return r.a.createElement("option",{value:e,key:e},b.a.translate("transaction.trxTypes."+e))});var E=f.length?f.slice(0,h).map(function(e){return r.a.createElement(l.a,{includeOperationId:!0,operationId:e.id,style:O,key:e.id,op:e.op,result:e.result,txIndex:e.trx_in_block,block:e.block_num,current:d,hideFee:!0,inverted:!1,hideOpLabel:a,fullDate:!0})}):[r.a.createElement("tr",{key:"no_recent"},r.a.createElement("td",{colSpan:a?"2":"3"},r.a.createElement(i.a,{content:"operation.no_recent"})))];return E.push(r.a.createElement("tr",{className:"total-value",key:"total_value"},r.a.createElement("td",{style:{textAlign:"center"}},g>0?r.a.createElement("span",null,r.a.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":b.a.translate("transaction.csv_tip"),"data-place":"bottom"},r.a.createElement(v.a,{name:"excel",title:"icons.excel",className:"icon-14px"}))):null),r.a.createElement("td",{className:"column-hide-tiny"}),r.a.createElement("td",{colSpan:"2",style:{textAlign:"center"}},"Â ",this.props.showMore&&g>this.props.limit||h<g?r.a.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},r.a.createElement(v.a,{name:"chevron-down",title:"icons.chevron_down.transactions",className:"icon-14px"})):null))),r.a.createElement("div",{className:"recent-transactions no-overflow",style:s},r.a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard?null:r.a.createElement("div",{ref:"header"},r.a.createElement("div",{className:"block-content-header"},r.a.createElement("span",null,this.props.title?this.props.title:r.a.createElement(i.a,{content:"account.recent"})))),r.a.createElement("div",{className:"header-selector"},r.a.createElement("div",{className:"selector"},r.a.createElement("div",{className:_()("inline-block")},this.props.showFilters?r.a.createElement("select",{"data-place":"left","data-tip":b.a.translate("tooltip.filter_ops"),style:{paddingTop:5,width:"auto"},className:"bts-select no-margin",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},y):null))),r.a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:c-p},ref:"transactions"},r.a.createElement("table",{className:"table table-striped "+(a?"compact":"")+(this.props.dashboard?" dashboard-table table-hover":"")},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"column-hide-tiny",style:O},r.a.createElement(i.a,{content:"account.transactions.id"})),r.a.createElement("th",{className:"column-hide-tiny",style:O},r.a.createElement(i.a,{content:"account.transactions.type"})),r.a.createElement("th",{style:O},r.a.createElement(i.a,{content:"account.transactions.info"})),r.a.createElement("th",{style:O},r.a.createElement(i.a,{content:"account.transactions.time"})))),r.a.createElement(m.a,{component:"tbody",transitionName:"newrow"},E))),g>0&&this.state.csvExport&&r.a.createElement("div",{id:"csv_export_container",style:{display:"none"}},r.a.createElement("div",null,r.a.createElement("div",null,"DATE"),r.a.createElement("div",null,"OPERATION"),r.a.createElement("div",null,"MEMO"),r.a.createElement("div",null,"AMOUNT")),f.map(function(e){return r.a.createElement(l.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}();L.propTypes={accountsList:c.a.ChainAccountsList.isRequired,compactView:w.a.bool,limit:w.a.number,maxHeight:w.a.number,fullHeight:w.a.bool,showFilters:w.a.bool},L.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},L=Object(u.a)(L);var H=function(e){function t(){return A(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,r.a.Component),k(t,[{key:"render",value:function(){return r.a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}();H.propTypes={asset:c.a.ChainAsset.isRequired,to:c.a.ChainAccount.isRequired,fromAccount:c.a.ChainAccount.isRequired},H.defaultProps={asset:"1.3.0"},H=Object(u.a)(H)},1817:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(11),i=a.n(o),s=a(15),l=a(3),c=a.n(l),u=a(31),h=a(21),p=a(99),m=a(35),d=a(41),f=a(20),g=a(43),b=a(19),v=a(9),y=a(509),_=a(24),E=a(16),w=a.n(E),k=a(17),A=(a(1),a(2018)),x=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var N=function(e){function t(e){C(this,t);var a=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=e.viewSettings.get("marketLookupInput"),r=n?n.split(":"):[null];r[0],2===r.length&&r[1];return a.state={inverseSort:e.viewSettings.get("dashboardSortInverse",!0),sortBy:e.viewSettings.get("dashboardSort","star"),dashboardFilter:e.viewSettings.get("dashboardFilter","")},a}return O(t,r.a.Component),x(t,[{key:"shouldComponentUpdate",value:function(e,t){return!s.a.are_equal_shallow(e.accounts,this.props.accounts)||e.isContactsList!==this.props.isContactsList||e.showMyAccounts!==this.props.showMyAccounts||e.width!==this.props.width||e.showIgnored!==this.props.showIgnored||e.locked!==this.props.locked||e.passwordAccount!==this.props.passwordAccount||!s.a.are_equal_shallow(e.starredAccounts,this.props.starredAccounts)||!s.a.are_equal_shallow(t,this.state)}},{key:"_onStar",value:function(e,t,a){a.preventDefault(),t?g.a.removeStarAccount(e):g.a.addStarAccount(e)}},{key:"_goAccount",value:function(e,t){this.props.history.push("/account/"+e),f.a.changeViewSetting({overviewTab:t})}},{key:"_createAccount",value:function(){this.props.history.push("/create-account/wallet")}},{key:"_onFilter",value:function(e){this.setState({dashboardFilter:e.target.value.toLowerCase()}),f.a.changeViewSetting({dashboardFilter:e.target.value.toLowerCase()})}},{key:"_setSort",value:function(e){var t=e===this.state.sortBy?!this.state.inverseSort:this.state.inverseSort;this.setState({sortBy:e,inverseSort:t}),f.a.changeViewSetting({dashboardSort:e,dashboardSortInverse:t})}},{key:"_onAddContact",value:function(e){g.a.addAccountContact(e)}},{key:"_onRemoveContact",value:function(e){g.a.removeAccountContact(e)}},{key:"_renderList",value:function(e,t){var a=this,n=this.props,o=n.width,l=n.starredAccounts,c=n.isContactsList,u=n.passwordAccount,h=this.state,p=h.dashboardFilter,m=h.sortBy,d=h.inverseSort,f=i.a.List();return e.filter(function(e){if(!e)return!1;var t=e.get("name"),n=_.a.isMyAccount(e)||t===u;return!!c||n===a.props.showMyAccounts}).filter(function(e){return!!e&&-1!==e.get("name").toLowerCase().indexOf(p)}).sort(function(e,t){switch(m){case"star":return function(e,t,a,n){var r=e.get("name"),o=t.get("name"),i=n.has(r),l=n.has(o);return i&&!l?a?-1:1:l&&!i?a?1:-1:r>o?a?1:-1:r<o?a?-1:1:s.a.sortText(r,o,!a)}(e,t,d,l);case"name":return s.a.sortText(e.get("name"),t.get("name"),d)}}).map(function(e){if(e){var n={},i={},s={};f=f.clear();var h=e.get("name"),p=e.get("lifetime_referrer_name")===h;e.get("orders")&&e.get("orders").forEach(function(e,t){var a=v.b.getObject(e);if(a){var n=a.getIn(["sell_price","base","asset_id"]);s[n]?s[n]+=parseInt(a.get("for_sale"),10):s[n]=parseInt(a.get("for_sale"),10)}}),e.get("call_orders")&&e.get("call_orders").forEach(function(e,t){var a=v.b.getObject(e);if(a){var r=a.getIn(["call_price","base","asset_id"]);n[r]?n[r]+=parseInt(a.get("collateral"),10):n[r]=parseInt(a.get("collateral"),10);var o=a.getIn(["call_price","quote","asset_id"]);i[o]?i[o]+=parseInt(a.get("debt"),10):i[o]=parseInt(a.get("debt"),10)}});var m=e.get("balances");e.get("balances")&&m.forEach(function(e){var t=v.b.getObject(e);if(!t||!t.get("balance"))return null;f=f.push(e)});var d=_.a.isMyAccount(e)||h===u,g=l.has(h),E=g?"gold-star":"grey-star";return r.a.createElement("tr",{key:h},r.a.createElement("td",{className:"clickable",onClick:a._onStar.bind(a,h,g)},r.a.createElement(b.a,{className:E,name:"fi-star",title:"icons.fi_star.account"})),c?t&&r.a.createElement("td",{onClick:a._onAddContact.bind(a,h)},r.a.createElement(b.a,{name:"plus-circle",title:"icons.plus_circle.add_contact"}))||r.a.createElement("td",{onClick:a._onRemoveContact.bind(a,h)},r.a.createElement(b.a,{name:"minus-circle",title:"icons.minus_circle.remove_contact"})):null,r.a.createElement("td",{style:{textAlign:"left"}},e.get("id")),r.a.createElement("td",{style:{textAlign:"left",paddingLeft:10},onClick:a._goAccount.bind(a,h,0),className:"clickable"+(d?" my-account":"")},r.a.createElement("span",{className:p?"lifetime":""},h)),r.a.createElement("td",{className:"clickable",onClick:a._goAccount.bind(a,h,1),style:{textAlign:"right"}},r.a.createElement(y.a,{noTip:!0,balances:[],openOrders:s})),o>=750?r.a.createElement("td",{className:"clickable",onClick:a._goAccount.bind(a,h,2),style:{textAlign:"right"}},r.a.createElement(y.a,{noTip:!0,balances:[],collateral:n})):null,o>=1200?r.a.createElement("td",{className:"clickable",onClick:a._goAccount.bind(a,h,2),style:{textAlign:"right"}},r.a.createElement(y.a,{noTip:!0,balances:[],debt:i})):null,r.a.createElement("td",{className:"clickable",onClick:a._goAccount.bind(a,h,0),style:{textAlign:"right"}},r.a.createElement(y.a,{noTip:!0,balances:f,collateral:n,debt:i,openOrders:s})))}})}},{key:"render",value:function(){var e=this.props,t=e.width,a=e.showIgnored,n=e.isContactsList,o=this.state.dashboardFilter,i=this._renderList(this.props.accounts),s=this._renderList(this.props.ignoredAccounts,!0),l=n?w.a.translate("explorer.accounts.filter_contacts"):w.a.translate("explorer.accounts.filter");l+="...";var u=!!k.a.getWallet();return r.a.createElement("div",{style:this.props.style},this.props.compact?null:r.a.createElement("section",{style:{paddingTop:"1rem",paddingLeft:"2rem"}},r.a.createElement("input",{placeholder:l,style:{maxWidth:"20rem",display:"inline-block"},type:"text",value:o,onChange:this._onFilter.bind(this)}),u&&!n?r.a.createElement("div",{onClick:this._createAccount.bind(this),style:{display:"inline-block",marginLeft:5,marginBottom:"1rem"},className:"button small"},r.a.createElement(c.a,{content:"header.create_account"})):null,s&&s.length?r.a.createElement("div",{onClick:this.props.onToggleIgnored,style:{display:"inline-block",float:"right",marginRight:"20px"},className:"button small"},r.a.createElement(c.a,{content:"account."+(this.props.showIgnored?"hide_ignored":"show_ignored")})):null),r.a.createElement("table",{className:"table table-hover dashboard-table",style:{fontSize:"0.85rem"}},this.props.compact?null:r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{onClick:this._setSort.bind(this,"star"),className:"clickable"},r.a.createElement(b.a,{className:"grey-star",name:"fi-star",title:"icons.fi_star.sort_accounts"})),n?r.a.createElement("th",null,r.a.createElement(b.a,{name:"user",title:"icons.user.account"})):null,r.a.createElement("th",{style:{textAlign:"left"}},"ID"),r.a.createElement("th",{style:{textAlign:"left",paddingLeft:10},onClick:this._setSort.bind(this,"name"),className:"clickable"},r.a.createElement(c.a,{content:"header.account"})),r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(c.a,{content:"account.open_orders"})),t>=750?r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(c.a,{content:"account.as_collateral"})):null,t>=1200?r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(c.a,{content:"transaction.borrow_amount"})):null,r.a.createElement("th",{style:{textAlign:"right",marginRight:20}},r.a.createElement(c.a,{content:"account.total_value"})))),r.a.createElement("tbody",null,i,a&&s.length?r.a.createElement("tr",{className:"dashboard-table--hiddenAccounts",style:{backgroundColor:"transparent"},key:"hidden"},r.a.createElement("td",{colSpan:"8"},w.a.translate("account.hidden_accounts_row"),":")):null,a&&s)))}}]),t}();N.propTypes={accounts:m.a.ChainAccountsList.isRequired,ignoredAccounts:m.a.ChainAccountsList},N.defaultProps={width:2e3,compact:!1},N=Object(d.a)(N);var j=function(e){function t(){return C(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,r.a.Component),x(t,[{key:"render",value:function(){return r.a.createElement(N,this.props)}}]),t}();j=Object(A.a)(j),t.a=Object(u.connect)(j,{listenTo:function(){return[h.a,p.a,_.a]},getProps:function(){return{locked:p.a.getState().locked,starredAccounts:_.a.getState().starredAccounts,viewSettings:h.a.getState().viewSettings}}})}}]);